---
import PointSpan from "@components/commons/PointSpan.astro";
import LeftLine from "@components/commons/LeftLine.astro";
import AboutSubHeader from "@components/about/SubHeader.astro";
import LinkWithIcon from "@components/commons/LinkWithIcon";
import type { MarkdownInstance } from "astro";

interface ProjectAbout {
  title: string;
  period: string;
  urls: { src: string; alt: string }[];
  stacks: string[];
  summerize: string;
}

const projectAboutPosts = Object.values(
  import.meta.glob("@contents/projects/*.md", {
    eager: true,
  }),
) as MarkdownInstance<ProjectAbout>[];
---

<div class="flex flex-col gap-8 my-12 w-[420px]:gap-4">
  <h2>
    <PointSpan text="Projects" className="text-5xl font-bold" />
  </h2>
  <LeftLine>
    {
      projectAboutPosts.map((post) => (
        <AboutSubHeader period={post.frontmatter.period}>
          <div class="text-2xl" slot="title">
            {post.frontmatter.title}
          </div>
        </AboutSubHeader>
        <div class="flex flex-wrap gap-3 my-2">
          {
            post.frontmatter.urls.map(
              (url: { src: string; alt: string }) => (
                <LinkWithIcon title={url.alt} href={url.src} />
            ))
          }
          {
            post.frontmatter.stacks.map((stack: string) => (
              <span class="text-gray-500">{stack}</span>
            ))
          }
          <div>{post.frontmatter.summerize}</div>
        </div>
      ))
    }
  </LeftLine>
</div>
